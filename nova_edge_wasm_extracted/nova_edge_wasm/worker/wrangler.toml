name = "ubl-flagship-edge"
main = "src/worker.mjs"
compatibility_date = "2025-01-01"

routes = [{ pattern = "nova.api.ubl.agency/*", zone_name = "ubl.agency" }]

[vars]
ACCESS_AUD = "PASTE-YOUR-ACCESS-APP-AUD"
ACCESS_JWKS = "https://<your-team>.cloudflareaccess.com/cdn-cgi/access/certs"
POLICY_PUBKEY_B64 = "PASTE-PUBKEY-PEM-BASE64"

[[kv_namespaces]]
binding = "UBL_FLAGS"
id = "paste_kv_id_here"

[[queues.producers]]
binding = "UBL_EVENTS"
queue = "ubl-policy-events"

[wasm_modules]
ENGINE = { path = "build/policy_engine.wasm" }
